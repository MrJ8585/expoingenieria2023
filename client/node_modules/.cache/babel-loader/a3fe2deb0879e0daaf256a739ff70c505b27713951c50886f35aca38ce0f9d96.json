{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Josea\\\\Desktop\\\\expoingenieria2023\\\\client\\\\src\\\\components\\\\Eval.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport { useState } from 'react';\nimport '../css/Eval.css';\nimport { useAuth0 } from '@auth0/auth0-react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Eval(_ref) {\n  _s();\n  let {\n    proy,\n    category\n  } = _ref;\n  const catDic = {\n    1: \"Academica Digital\",\n    2: \"Academica PPA\",\n    3: \"Intermedio Digital\",\n    4: \"Intermedio PPA\",\n    5: \"Avanzada PPA\",\n    6: \"Avanazada Digital\"\n  };\n  const [evalMode, setEvalMode] = useState(false);\n  const [rubrica, setRubrica] = useState([]);\n  const [cat, setCat] = useState('');\n  const {\n    user\n  } = useAuth0();\n  const [cals, setCals] = useState([]);\n  const navigate = useNavigate();\n  const evalCat = () => {\n    setCat(catDic[category]);\n  };\n  function sleep(ms) {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n  const postEval = async (proyId, qId, cal) => {\n    try {\n      let correo = user === null || user === void 0 ? void 0 : user.email;\n      const response = await fetch(`https://expoingenieria.onrender.com/calificar/${proyId}/${qId}/${cal}`, {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          \"correo\": `${correo}`\n        })\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const getEval = async () => {\n    try {\n      const response = await fetch(`https://expoingenieria.onrender.com/pregunta/${category}`, {\n        method: 'POST'\n      });\n      const data = await response.json();\n      setRubrica(data);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    for (let i = 0; i < cals.length; i++) {\n      if (cals[i] < 50) {\n        cals[i] = 0;\n      }\n      postEval(proy, i + 1, cals[i]);\n    }\n    navigate('/categories');\n  };\n  useEffect(() => {\n    getEval();\n  }, []);\n  useEffect(() => {\n    evalCat();\n  }, [category]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-eval\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"eval-button\",\n      onClick: () => {\n        setEvalMode(true);\n      },\n      children: \"Evaluar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }, this), evalMode ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"eval-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-head\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setEvalMode(false);\n          },\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"Rubrica \", cat]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"main-eval-q\",\n        onSubmit: handleSubmit,\n        children: [rubrica.map(rubq => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"eval-maped\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"desc\",\n            children: rubq.pregunta\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            required: true,\n            min: 0,\n            max: 100,\n            onChange: e => {\n              cals[rubq.idPregunta - 1] = parseInt(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this)]\n        }, rubq.idPregunta, true, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"enviar\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Enviar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 21\n    }, this) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 5\n  }, this);\n}\n_s(Eval, \"7q/Jqi2rp31BkskBnYJ0q3CHmjU=\", false, function () {\n  return [useAuth0, useNavigate];\n});\n_c = Eval;\nexport default Eval;\nvar _c;\n$RefreshReg$(_c, \"Eval\");","map":{"version":3,"names":["React","useEffect","useState","useAuth0","useNavigate","jsxDEV","_jsxDEV","Eval","_ref","_s","proy","category","catDic","evalMode","setEvalMode","rubrica","setRubrica","cat","setCat","user","cals","setCals","navigate","evalCat","sleep","ms","Promise","resolve","setTimeout","postEval","proyId","qId","cal","correo","email","response","fetch","method","headers","body","JSON","stringify","ok","Error","status","error","console","log","getEval","data","json","handleSubmit","event","preventDefault","i","length","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","map","rubq","pregunta","type","required","min","max","onChange","e","idPregunta","parseInt","target","value","_c","$RefreshReg$"],"sources":["C:/Users/Josea/Desktop/expoingenieria2023/client/src/components/Eval.tsx"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport {useState} from 'react'\r\nimport '../css/Eval.css'\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport e from 'express';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\ninterface myProps {\r\n    proy: number;\r\n    category: number;\r\n}\r\n\r\ninterface catDic {\r\n    [key: number]: string;    \r\n}\r\n\r\nfunction Eval({proy, category}: myProps) {\r\n\r\n    const catDic: catDic = {\r\n        1: \"Academica Digital\",\r\n        2: \"Academica PPA\",\r\n        3: \"Intermedio Digital\",\r\n        4: \"Intermedio PPA\",\r\n        5: \"Avanzada PPA\",\r\n        6: \"Avanazada Digital\"\r\n    }\r\n\r\n    const [evalMode, setEvalMode] = useState(false)\r\n\r\n    const [rubrica, setRubrica] = useState<Array<{}>>([])\r\n\r\n    const [cat, setCat] = useState<String>('')\r\n\r\n    const {user} = useAuth0()\r\n\r\n    const [cals, setCals] = useState<any>([])\r\n\r\n    const navigate = useNavigate()\r\n\r\n    const evalCat = () => {\r\n        setCat(catDic[(category)]);\r\n    };\r\n\r\n    function sleep(ms: number) {\r\n        return new Promise(resolve => setTimeout(resolve, ms));\r\n    }\r\n\r\n\r\n    const postEval = async (proyId:any, qId:any, cal:any) => {\r\n        try {   \r\n\r\n            let correo = user?.email\r\n\r\n            const response = await fetch(`https://expoingenieria.onrender.com/calificar/${proyId}/${qId}/${cal}`,{\r\n                method: 'POST',\r\n                headers: {\"Content-Type\": \"application/json\"},\r\n                body: JSON.stringify({\"correo\": `${correo}`})\r\n            })\r\n\r\n            if(!response.ok){\r\n                throw new Error(`HTTP error! status: ${response.status}`)\r\n            }\r\n\r\n        } catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const getEval = async () => {\r\n\r\n        try {\r\n\r\n            const response = await fetch(`https://expoingenieria.onrender.com/pregunta/${category}`, {\r\n                method: 'POST'\r\n            })\r\n\r\n            const data = await response.json()\r\n\r\n            setRubrica(data)\r\n\r\n        } catch (error) {\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = (event:any) => {\r\n\r\n        event.preventDefault();\r\n\r\n        for(let i = 0;i < cals.length; i++){\r\n            \r\n            if(cals[i]<50){\r\n                cals[i]=0\r\n            }\r\n\r\n            postEval(proy, i+1, cals[i])\r\n\r\n        }\r\n\r\n        navigate('/categories')\r\n\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        getEval()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        evalCat()\r\n    }, [category])\r\n\r\n  return (\r\n    <div className='main-eval'>\r\n\r\n        <button className='eval-button' onClick={() => {\r\n            setEvalMode(true)\r\n        }}>Evaluar</button>\r\n\r\n        {evalMode ? <div className='eval-form'>\r\n\r\n            <div className='form-head'>\r\n                <button onClick={() => {\r\n                    setEvalMode(false)\r\n                }}>\r\n                    Close\r\n                </button>\r\n            </div>\r\n\r\n            <div className='title'>\r\n                <h1>Rubrica {cat}</h1>\r\n            </div>\r\n\r\n            <form className='main-eval-q' onSubmit={handleSubmit}>\r\n                {rubrica.map((rubq:any) => (\r\n                    <div className='eval-maped' key={rubq.idPregunta}>\r\n                        <div className='desc'>\r\n                            {rubq.pregunta}\r\n                        </div>\r\n                        <input type='number' required min={0} max={100}\r\n                            onChange={e => {\r\n                                cals[rubq.idPregunta-1] = parseInt(e.target.value)\r\n                            }}\r\n                        ></input>\r\n                    </div>  \r\n                ))}\r\n\r\n                <div className='enviar'>\r\n                    <button type='submit'>Enviar</button>\r\n                </div>\r\n            </form>\r\n\r\n        </div>:null}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Eval"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}